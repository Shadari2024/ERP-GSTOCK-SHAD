{% extends "achats/base_achats.html" %}
{% load crispy_forms_tags %}

{% block page_title %}{% if object %}Modifier{% else %}Créer{% endif %} une Facture Fournisseur{% endblock %}

{% block achats_content %}
<div class="erp-facture-form-container">
    <div class="erp-content-header">
        <h2 class="erp-content-title">{% if object %}Modifier{% else %}Créer{% endif %} une Facture</h2>
    </div>

    <div class="erp-card">
        <div class="erp-card-body">
            <form method="post">
                {% csrf_token %}
                
                <div class="erp-form-row">
                    <div class="erp-form-group">
                        {{ form.fournisseur|as_crispy_field }}
                    </div>
                    <div class="erp-form-group">
                        {{ form.bon_reception|as_crispy_field }}
                    </div>
                </div>
                
                <div class="erp-form-row">
                                                            <div class="erp-form-group">
                        {{ form.date_facture|as_crispy_field }}
                    </div>
                    <div class="erp-form-group">
                        {{ form.date_echeance|as_crispy_field }}
                    </div>
                </div>
                
                <div class="erp-form-row">
                    <div class="erp-form-group">
                        {{ form.montant_ht|as_crispy_field }}
                    </div>
                    <div class="erp-form-group">
                        {{ form.montant_tva|as_crispy_field }}
                    </div>
                    <div class="erp-form-group">
                        {{ form.montant_ttc|as_crispy_field }}
                    </div>
                </div>
                
                <div class="erp-form-group">
                    {{ form.notes|as_crispy_field }}
                </div>
                
                <div class="erp-form-actions">
                    <button type="submit" class="erp-btn erp-btn-primary">
                        <i class="bi bi-check-circle"></i> {% if object %}Modifier{% else %}Créer{% endif %} la Facture
                    </button>
                    <a href="{% url 'achats:liste_factures' %}" class="erp-btn erp-btn-secondary">
                        <i class="bi bi-x-circle"></i> Annuler
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
.erp-facture-form-container {
    padding: 2rem;
    background: var(--card-background);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    margin: 2rem auto;
    max-width: 1000px;
}

.erp-form-row {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
}

.erp-form-group {
    flex: 1;
    min-width: 250px;
}

.erp-form-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border-color);
}

@media (max-width: 768px) {
    .erp-form-row {
        flex-direction: column;
    }
    
    .erp-form-group {
        min-width: unset;
        width: 100%;
    }
    
    .erp-form-actions {
        flex-direction: column;
    }
}
</style>
{% endblock %}